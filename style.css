*{box-sizing:border-box}

/* ---- Layout général ---- */

body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:#f3f4f6;
  color:#111827;
}

header{
  padding:0.8rem 1.5rem;
  background:#020617;
  color:#f9fafb;
  display:flex;
  justify-content:space-between;
  align-items:center;
  box-shadow:0 2px 6px rgba(15,23,42,0.35);
}

.header-left{
  display:flex;
  align-items:center;
  gap:1rem;
}

.header-right{
  display:flex;
  flex-direction:column;
  align-items:flex-end;
}

h1{
  margin:0;
  font-size:1.1rem;
  letter-spacing:.06em;
  text-transform:uppercase;
}

/* Mode développeur switch */

.dev-toggle{
  display:inline-flex;
  align-items:center;
  gap:.4rem;
  font-size:.8rem;
  color:#e5e7eb;
  user-select:none;
  cursor:pointer;
}

.dev-toggle input{display:none}

.dev-toggle-slider{
  width:34px;
  height:18px;
  border-radius:999px;
  background:#4b5563;
  position:relative;
  transition:background .15s ease;
}

.dev-toggle-slider::before{
  content:"";
  position:absolute;
  width:14px;
  height:14px;
  border-radius:999px;
  background:#f9fafb;
  top:2px;
  left:2px;
  transition:transform .15s ease;
}

.dev-toggle input:checked + .dev-toggle-slider{
  background:#22c55e;
}

.dev-toggle input:checked + .dev-toggle-slider::before{
  transform:translateX(16px);
}

/* Status / live */

.badge-live{
  font-size:.7rem;
  display:inline-flex;
  align-items:center;
  gap:.3rem;
  padding:.15rem .5rem;
  border-radius:999px;
  background:rgba(34,197,94,0.12);
  color:#bbf7d0;
  border:1px solid rgba(34,197,94,0.4);
}

.badge-live-dot{
  width:7px;
  height:7px;
  border-radius:50%;
  background:#22c55e;
  box-shadow:0 0 0 4px rgba(34,197,94,0.35);
}

.status{
  font-size:.75rem;
  margin-top:.2rem;
}
.status.ok{color:#bbf7d0}
.status.err{color:#fecaca}

/* Main */

main{
  padding:1rem 1.5rem 1rem;
  max-width:1400px;
  margin:0 auto;
}

.top-bar{
  display:flex;
  flex-wrap:wrap;
  gap:.75rem;
  align-items:center;
  margin-bottom:.5rem;
}

/* Formulaires */

.form-inline{
  display:flex;
  flex-wrap:wrap;
  gap:.4rem;
  align-items:center;
  background:#e5e7eb;
  border-radius:999px;
  padding:.4rem .6rem;
  border:1px solid #d1d5db;
  box-shadow:0 2px 6px rgba(15,23,42,0.12);
}

.form-inline input,
.form-inline select{
  border:none;
  font-size:.8rem;
  padding:.25rem .5rem;
  border-radius:999px;
  outline:none;
  background:#ffffff;
  color:#111827;
  border:1px solid #d1d5db;
}

.form-inline input::placeholder{color:#9ca3af}

.btn{
  border:none;
  border-radius:999px;
  padding:.35rem .8rem;
  font-size:.8rem;
  font-weight:500;
  cursor:pointer;
  background:#111827;
  color:#f9fafb;
  transition:background .15s,transform .05s,box-shadow .05s;
  box-shadow:0 1px 4px rgba(15,23,42,.25);
}
.btn:hover{background:#030712}
.btn:active{
  transform:translateY(1px);
  box-shadow:0 0 0 rgba(0,0,0,0.2);
}

/* Board */

.board{
  display:flex;
  gap:1rem;
  margin-top:1rem;
  overflow-x:auto;
  padding-bottom:1rem;
}

/* Colonnes */

.column{
  background:#e5e7eb;
  border-radius:.9rem;
  border:1px solid #d1d5db;
  padding:.7rem;
  display:flex;
  flex-direction:column;
  max-height:calc(100vh - 210px);
  min-width:260px;
  flex:0 0 auto;
  box-shadow:0 6px 14px rgba(15,23,42,0.12);
}

.column-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:.5rem;
  gap:.35rem;
}

.column-title{
  font-weight:600;
  font-size:.95rem;
  cursor:pointer;
  padding:.15rem .4rem;
  border-radius:999px;
  background:#ffffff;
  color:#111827;
  border:1px solid #d1d5db;
}

.column-title:hover{background:#f9fafb}

.column-count{
  background:#111827;
  color:#f9fafb;
  border-radius:999px;
  padding:0 .55rem;
  font-size:.75rem;
}

.column-actions{
  display:flex;
  gap:.25rem;
  align-items:center;
}

.icon-btn{
  border:none;
  background:transparent;
  cursor:pointer;
  font-size:.9rem;
  line-height:1;
  opacity:.6;
  padding:.1rem;
  color:#4b5563;
}
.icon-btn:hover{
  opacity:1;
  color:#111827;
}

.color-trigger{
  width:18px;
  height:18px;
  border-radius:999px;
  border:1px solid #9ca3af;
  background:#22c55e;
  padding:0;
  cursor:pointer;
}
.color-trigger.small{
  width:15px;
  height:15px;
}

.column-body{
  flex:1;
  overflow-y:auto;
  padding:.25rem;
  border-radius:.7rem;
}

/* Sous-catégories */

.subcategory{
  background:#d1d5db;
  border-radius:.7rem;
  padding:.25rem .3rem .35rem;
  margin-bottom:.45rem;
  border:1px solid #cbd5e1;
  box-shadow:0 2px 6px rgba(15,23,42,0.08);
}

.subcategory--none{
  background:transparent;
  border-style:dashed;
  border-color:#cbd5e1;
  box-shadow:none;
}

.subcategory-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:.2rem;
  gap:.25rem;
}

.subcategory-title{
  font-weight:500;
  font-size:.78rem;
  cursor:pointer;
  padding:.05rem .35rem;
  border-radius:999px;
  background:#f9fafb;
  color:#111827;
  border:1px solid #d1d5db;
}
.subcategory-title:hover{background:#ffffff}

.subcategory-count{
  font-size:.7rem;
  background:#9ca3af;
  color:#f9fafb;
  border-radius:999px;
  padding:0 .45rem;
}

.subcategory-body{
  border-radius:.45rem;
  padding:.15rem;
  min-height:24px;
  transition:background .15s,outline .15s;
}

.subcategory-body--hover{
  background:#e5e7eb;
  outline:2px dashed #9ca3af;
  outline-offset:-2px;
}

/* Drag sous-catégorie */

.dragging-sub{opacity:.4}
.sub-drop-top{border-top:3px solid #22c55e}
.sub-drop-bottom{border-bottom:3px solid #22c55e}

/* Cartes */

.card{
  position:relative;
  background:#ffffff;
  border-radius:.7rem;
  padding:.5rem .6rem;
  margin-bottom:.5rem;
  box-shadow:0 2px 6px rgba(15,23,42,0.12);
  cursor:grab;
  border:1px solid #e5e7eb;
  transition:transform .1s,box-shadow .1s,border-color .1s,background .1s;
}

.card:active{
  cursor:grabbing;
  transform:scale(1.02);
  box-shadow:0 6px 18px rgba(15,23,42,0.18);
}

.card--drag-over-top{border-top:2px solid #16a34a}
.card--drag-over-bottom{border-bottom:2px solid #16a34a}

.card-title{
  font-weight:600;
  font-size:.9rem;
  margin-bottom:.2rem;
  color:#111827;
}

.card-desc{
  font-size:.8rem;
  color:#4b5563;
  margin-bottom:.25rem;
}

.card-meta{
  font-size:.7rem;
  color:#6b7280;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:.25rem;
}

.tag{
  font-size:.7rem;
  background:#e0f2fe;
  color:#1d4ed8;
  border-radius:999px;
  padding:.05rem .5rem;
  border:1px solid #bfdbfe;
  cursor:pointer;
  user-select:none;
}

/* Menu couleur */

.color-menu{
  position:fixed;
  background:#ffffff;
  border-radius:.75rem;
  border:1px solid #d1d5db;
  padding:.6rem;
  box-shadow:0 12px 30px rgba(15,23,42,0.25);
  z-index:9999;
  width:190px;
}
.color-menu.hidden{display:none}

.color-menu-title{
  font-size:.75rem;
  color:#6b7280;
  margin-bottom:.35rem;
}

.color-menu-grid{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:.3rem;
}

.color-swatch{
  width:22px;
  height:22px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,0.7);
  cursor:pointer;
  outline:none;
  padding:0;
}
.color-swatch:hover{
  transform:scale(1.06);
  box-shadow:0 0 0 2px rgba(59,130,246,0.35);
}

/* Dev mode : cacher les éléments d'édition quand OFF */

body:not(.dev-mode-on) .dev-only{
  display:none !important;
}

/* Footer */

footer{
  font-size:.7rem;
  text-align:center;
  padding:.7rem;
  color:#6b7280;
}

/* Responsive */

@media(max-width:768px){
  main{padding:.75rem .5rem}
  .board{flex-direction:row}
}
